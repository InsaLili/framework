<div class="container" ng-controller="CtrlStep1">
	<div class="col-md-12">
		<div class="showStep">
			<h3>Step1/3: indentify the decision to be made, identify alternatives</h3>
			<button class="btn btn-default" data-toggle="collapse" data-target="#instruction">? Instruction</button>
			<div id="instruction" class="panel-collapse collapse">
				<p>Define clearly the nature of the decision that must be taken by students. Identify all the alternaives (for example, in a trip planning task, the alternatives could be a list hotels). Provide information of each alternatives (e.g. the price, location or room type of a hotel). These information will be accessible on appointed devices (on personal device, shared display or both). You can also add information that are relevant for students to make decision reasonable (for example, budges, avaliable days or other constrains for the trip plannning task).</p>
			</div>
		</div>
		<!-- set the corrdination of the map -->
		<div class="jumbotron" id="items">
			<form class="row form-horizontal" id="step1Form" role="form" name="step1Form">
				<div class="col-md-7">
					<!-- set the map -->
					<div class="row item">
						<div class="col-md-4">
							<h4>Set map coordinate:</h4>				
						</div>
						<div class="col-md-8">
							<div class="form-group">
								<label class="col-md-3 control-label" for="lng">Longtitude</label>
								<div class="col-md-6">
									<input type="number" name="lng" step="any" class="form-control" placeholder="ex: 12.3456" ng-model="mapstep1.map.lng" required>
								</div>
							</div>
							<div class="form-group">
								<label class="col-md-3 control-label" for="lat">Laititude</label>
								<div class="col-md-6">
									<input type="number" name="lat" step="any" class="form-control" placeholder="ex: 12.3456" ng-model="mapstep1.map.lat" required>
								</div>
							</div>
							<div class="form-group">
								<label class="col-md-3 control-label">Zoom</label>
								<div class="col-md-6">
									<input type="number" step="any" class="form-control" ng-model="mapstep1.map.zoom">
								</div>
							</div>
						</div>
					</div>
					<!-- add markers -->
					<div class="row item">
						<div class="col-md-4">
							<h4>Add alternatives:</h4>
							<div class="caption">
								<p>(markers on the map)</p>
							</div>
						</div>
						<div class="col-md-8">
							<div class="panel-group" id="showMarkers">
								<div class="panel panel-default" ng-repeat="marker in mapstep1.markers">
									<div class="panel-heading">
										<h4 class="panel-title">
											<a data-toggle="collapse"data-target="#marker-{{$index}}" ng-bind="marker.name"></a>
											<button type="button" class="deleteMarkerBtn btn btn-default btn-xs pull-right" ng-click="deleteItem($event,marker,mapstep1.markers)"><span class="glyphicon glyphicon-trash"></span></button>
										</h4>
									</div>
									<div id="marker-{{$index}}" class="panel-collapse collapse" >
										<div class="markerArea">
											<div class="form-group">
												<label class="control-label col-md-3">
													Name
												</label>
												<div class="col-md-9">
													<input type="text" class="form-control" ng-model="marker.name">
												</div>
											</div>
											<div class="form-group">
												<label class="control-label col-md-3">
													Longtitude
												</label>
												<div class="col-md-9">
													<input type="number" step="any" class="form-control" placeholder="ex: 12.3456" ng-model="marker.lng">
												</div>
											</div>					
											<div class="form-group">
												<label class="control-label col-md-3">
													Laititude
												</label>
												<div class="col-md-9">
													<input type="number" step="any" class="form-control" placeholder="ex: 12.3456" ng-model="marker.lat">
												</div>
											</div>	
											<div class="form-group">
												<label class="control-label col-md-3">
													Marker symbol
												</label>
												<div class="col-md-9">
													<input type="text" class="form-control" placeholder="number (0-99); or one lower case letter" ng-model="marker.icon.icon">
												</div>
											</div>	
											<div class="form-group">
												<label class="control-label col-md-3">
													Add img (optional)
												</label>
												<div class="col-md-9">
													<input type="file" class="form-control" accept="image/*" onchange="angular.element(this).scope().handleMarkerFiles(this)">
												</div>
											</div>					
											<div class="form-group">
												<label class="control-label col-md-3">
													Data
												</label>
												<div class="col-md-9">
													<textarea class="form-control" ng-model="marker.data" rows="4"></textarea>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div> 
							<button class="btn btn-primary" data-toggle="collapse" data-target="#newmarker">New marker</button>
							<div id="newmarker" class="panel-collapse collapse" >
								<div class="markerArea">
									<div class="form-group">
										<label class="control-label col-md-3">
											Name
										</label>
										<div class="col-md-9">
											<input type="text" class="form-control" ng-model="newMarker.name">
										</div>
									</div>
									<div class="form-group">
										<label class="control-label col-md-3">
											Longtitude
										</label>
										<div class="col-md-9">
											<input type="number" step="any" class="form-control" placeholder="ex: 12.3456" ng-model="newMarker.lng">
										</div>
									</div>					
									<div class="form-group">
										<label class="control-label col-md-3">
											Laititude
										</label>
										<div class="col-md-9">
											<input type="number" step="any" class="form-control" placeholder="ex: 12.3456" ng-model="newMarker.lat">
										</div>
									</div>	
									<div class="form-group">
										<label class="control-label col-md-3">
											Marker symbol
										</label>
										<div class="col-md-9">
											<input type="text" class="form-control" placeholder="number (0-99); or one lower case letter" ng-model="newMarker.icon.icon">
										</div>
									</div>	
									<div class="form-group">
										<label class="control-label col-md-3">
											Add img (optional)
										</label>
										<div class="col-md-9">
											<input type="file" class="form-control" accept="image/*" onchange="angular.element(this).scope().handleMarkerFiles(this)">
										</div>
									</div>					
									<div class="form-group">
										<label class="control-label col-md-3">
											Data
										</label>
										<div class="col-md-9">
											<textarea class="form-control" ng-model="newMarker.data" rows="4"></textarea>
										</div>
									</div>
									<div class="form-group saveBtn">
										<div class="col-md-12">
											<button class="btn btn-default pull-right" ng-click="addMarker()"><span class="glyphicon glyphicon-plus"></span>  Add</button>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- evaluating criteria -->
					<div class="row item">
						<div class="col-md-4">
							<h4>Add criteria for evaluating alternatives:</h4>
							<div class="caption">
								<p>(optional)</p>
							</div>
							<div class="caption">
						    <p>
						     	<!-- <input type="checkbox" ng-model="cris.student"> -->
						     	You can let students to add more criteria by themselves in the next step.
						    </p>
							</div>
						</div>
						<div class="col-md-8">
							<div class="panel-group" id="showCris">
								<div class="panel panel-default" ng-repeat="cri in mapstep1.cris.teacher">
									<div class="panel-heading">
										<h4 class="panel-title">
											{{cri.name}}
											<button type="button" class="btn btn-default btn-xs pull-right" ng-click="deleteItem($event,cri,mapstep1.cris.teacher)"><span class="glyphicon glyphicon-trash"></span></button>
										</h4>
									</div>
									<div id="cri-{{$index}}" class="panel-collapse collapse">
										<div class="infoArea">
											<div class="form-group">
												<label class="control-label col-md-3">
													Name
												</label>
												<div class="col-md-9">
													<input type="text" class="form-control" ng-model="cri.name">
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<button class="btn btn-primary"  data-toggle="collapse" data-target="#newCri">New criteria</button>
							<div id="newCri" class="panel-collapse collapse" >
								<div class="markerArea">
									<div class="form-group">
										<label class="control-label col-md-3">
											Name
										</label>
										<div class="col-md-9">
											<input type="text" class="form-control" ng-model="newCri.name">
										</div>
									</div>
									<div class="form-group saveBtn">
										<div class="col-md-12">
											<button class="btn btn-default pull-right" ng-click="addCri()"><span class="glyphicon glyphicon-plus"></span>  Add</button>
										</div>
									</div>
								</div>
							</div>
							
						</div>
					</div>
					<!-- add relevant information -->
					<div class="row item">
						<div class="col-md-4">
							<h4>Additional relevant information:</h4>
							<div class="caption">
								<p>(optional, these information would be accessable on the top-left corner of the page)</p>
							</div>
						</div>
						<div class="col-md-8">
							<div class="panel-group" id="showInfo">
								<div class="panel panel-default" ng-repeat="info in mapstep1.infos">
									<div class="panel-heading">
										<h4 class="panel-title">
											<a data-toggle="collapse" data-target="#info-{{$index}}" placeholder="Information" ng-bind="info.name"></a>
											<button type="button" class="btn btn-default btn-xs pull-right" ng-click="deleteItem($event,info,mapstep1.infos)"><span class="glyphicon glyphicon-trash"></span></button>
										</h4>
									</div>
									<div id="info-{{$index}}" class="panel-collapse collapse">
										<div class="infoArea">
											<div class="form-group">
												<label class="control-label col-md-3">
													Name
												</label>
												<div class="col-md-9">
													<input type="text" class="form-control" ng-model="info.name">
												</div>
											</div>
											<div class="form-group">
												<label class="control-label col-md-3">
													Information
												</label>
												<div class="col-md-9">
													<div class="row">
														<div class="radio col-md-3">
															<label><input type="radio" name="infoType{{$index}}" value="img" ng-model="info.type" required>Image</label>
														</div>
														<div class="col-md-9" ng-show="info.type == 'img'">
															<input type="file" class="form-control" accept="image/*" onchange="angular.element(this).scope().handleInfoFiles(this)">
														</div>
													</div>
													<div class="row">
														<div class="radio col-md-3">
															<label><input type="radio" name="infoType{{$index}}" value="text" ng-model="info.type" required>Text</label>
														</div>
														<div class="col-md-9" ng-show="info.type == 'text'">
															<textarea class="form-control" ng-model="info.text" rows="4"></textarea>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<button class="btn btn-primary" data-toggle="collapse" data-target="#newInfo">New information</button>
							<div id="newInfo" class="panel-collapse collapse" >
								<div class="markerArea">
									<div class="form-group">
										<label class="control-label col-md-3">
											Name
										</label>
										<div class="col-md-9">
											<input type="text" class="form-control" ng-model="newInfo.name">
										</div>
									</div>
									<div class="form-group">
										<label class="control-label col-md-3">
											Information
										</label>
										<div class="col-md-9">
											<div class="row">
												<div class="radio col-md-3">
													<label><input type="radio" name="newInfoType" value="img" ng-model="newInfo.type">Image</label>
												</div>
												<div class="col-md-9" ng-show="newInfo.type == 'img'">
													<input type="file" class="form-control" accept="image/*" onchange="angular.element(this).scope().handleInfoFiles(this)">
												</div>
											</div>
											<div class="row">
												<div class="radio col-md-3">
													<label><input type="radio" name="newInfoType" value="text" ng-model="newInfo.type">Text</label>
												</div>
												<div class="col-md-9" ng-show="newInfo.type == 'text'">
													<textarea class="form-control" ng-model="newInfo.text" rows="4"></textarea>
												</div>
											</div>
										</div>
									</div>	
									<div class="form-group saveBtn">
										<div class="col-md-12">
											<button class="btn btn-default pull-right" ng-click="addInfo()"><span class="glyphicon glyphicon-plus"></span>  Add</button>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<a class="btn btn-primary pull-right" class="nextStepBtn" ng-click="changeStep($event)" ng-disabled="step1Form.$invalid" href="#/step2">Next <span class="glyphicon glyphicon-chevron-right"></span></a>
				</div>
				<div class="col-md-5">
					<h4>Preview of the map</h4>
					<div id="previewMap">
						<leaflet width="100%" height="480px" lf-center="mapstep1.map" tiles="tiles" markers="mapstep1.markers"></leaflet>
					</div>
					<br>
					<div>
						You can adjust the map in preview, e.g. dragging the map to change the center coordinate, changing the zoom level, and dragging the markers to change their position
					</div>
				</div>
			</form>
		</div>
	</div>
</div>
