<div ng-controller="AppCtrl">
    <div id="maskLayer">
        <div id="welcomeScreen">
            <h1>Sélectionnez votre groupe :</h1>
        </div>
        <div id="chooseGroup" class="row">
            <div class="chooseGroup col-md-offset-2" ng-repeat="i in range(groupamount) track by $index">
            <!-- <div class="chooseGroup col-md-offset-2" ng-repeat="i in [1,2,3] track by $index"> -->
                <button class="btn btn-danger chooseGroupBtn" ng-click="chooseGroupNum($event,$index+1)">
                    <h2>Groupe {{$index+1}}</h2>
                </button>
            </div>
        </div>
    </div>
    <div id="appLayer">
        <div id="status" class="container row">
            <!--Détails sur l'insecte-->
            <div id="insect" class="kit col-md-1">
                <h3>Information</h3>
                <a id="insectBtn">
                    <img src="img/LogoInsecte.png">
                </a>
                <!-- <img id="insectImg" src="img/fourmis.png"> -->
                <a id="energyBtn">
                    <img src="img/LogoEnergy.jpg">
                </a>
                <!-- <img id="energyImg" src="img/energy.png"> -->
            </div>
            <!--Progress of the rating -->
            <div id="leaderboard" class="kit col-md-5">
                <h3>Progression</h3>
                <div class="players">
                    <div class="player">
                        <div class="avatars">
                            <img src="img/player1.png">
                        </div>
                        <div class="badges noteBadge">
                            <img src="img/badgeNoteExplorateur.png">
                        </div>
                        <!--<p>Explorateur</p>-->
                        <div class="progressbar" id="progressbar1"></div>
                        <P>0/4 Emplacements</P>
                    </div>
                    <div class="player">
                        <div class="avatars">
                            <img src="img/player2.png">
                        </div>
                        <div class="badges noteBadge">
                            <img src="img/badgeNoteJournaliste.png">
                        </div>
                        <!--<p>Journaliste</p>-->
                        <div class="progressbar" id="progressbar2"></div>
                        <P>0/4 Emplacements</P>
                    </div>
                    <div class="player">
                        <div class="avatars">
                            <img src="img/player3.png">
                        </div>
                        <div class="badges noteBadge">
                            <img src="img/badgeNotePhotographe.png">
                        </div>
                        <!--<p>Photographe</p>-->
                        <div class="progressbar" id="progressbar3"></div>
                        <P>0/4 Emplacements</P>
                    </div>
                </div>
                <div id="timerBadge" class="badges">
                    <img src="img/badgeTimer.png">
                </div>
            </div>
            <!--Show tasks of each step-->
            <div id="tasks" class="kit col-md-5">
                <h3>Consignes</h3>
                <!--<button class="btn btn-info btn-circle" id="resetLocationBtn">Repositionner<br>les fiches</button>-->
                <ul>
                    <li>
                        <div class="steps" id="step1">
                            <span class="glyphicon glyphicon-unchecked"></span>
                            <p>Étape 1 : Analysez et évaluez chaque emplacement</p>
                        </div>
                        <!--<div id="nextStep">-->
                            <!--<button class="btn btn-warning pull-right" id="toStep2">Validation</button>-->
                        <!--</div>-->
                    </li>
                    <li>
                        <div class="steps" id="step2">
                            <span class="glyphicon glyphicon-unchecked"></span>
                            <p>Étape 2 : Choisissez un emplacement</p>
                        </div>
                    </li>
                    <li>
                        <div class="steps" id="step3">
                            <span class="glyphicon glyphicon-unchecked"></span>
                            <p>Étape 3 : Construisez votre argumentaire</p>
                        </div>
                        <!--<div id="finalStep">-->
                            <!--<button class="btn btn-warning" id="finalStepBtn">Validation</button>-->
                        <!--</div>-->
                    </li>
                </ul>
            </div>
            <!--timer-->
            <div id="counter" class="kit  col-md-1">
                <h3>Chrono</h3>
                <div id="timer1"></div>
                <div id="timer2"></div>
                <div id="timer3"></div>
            </div>
        </div>
        <!--Here is the map div-->
        <!--Show the mountain location cards-->
        <div class="locations">
            <!-- !!!!todo: improve ng-click -->
            <div class="location" ng-repeat="marker in markers" id="location{{$index}}" ng-click="activeTouch()">
                <div class="locationTitle">
                    <h3>{{$index+1}}.  {{marker.name}}</h3>
                </div>
                <div class="locationContent">
                    <div class="visualPlayers" id="visualLocation{{$index}}">
                        <h4>Visualisation :</h4>
                        <div class="visualBtns" ng-repeat="i in range(studentAmount) track by $index">
                            <button class="btn player{{$index+1}} markerBtn" type="button" ng-click="checkLocation($event,$parent.$index+1,$index+1)"><img src="/img/player{{$index+1}}.png"></button>
                            <span class="check1 glyphicon glyphicon-ok-circle grey"></span>
                        </div>
                    </div>    
                    <div class="chooseLocation">
                        <button class="btn btn-default btn-md submitChoice" name="{{marker.name}}" ng-click="chooseLocation($event, $index+1)">Choisir cet<br/>emplacementt</button>
                    </div>
                    <div class="vote" id="vote{{$index+1}}">
                        <h4>Évaluation :</h4>
                        <span class="glyphicon glyphicon-star grey" ng-repeat="i in range(5) track by $index"></span><span class="label label-default caption">Pas Encore Évalué</span></div>
                    </div>
                    <div class="note">
                        <h4>Notes :</h4><span id="note{{$index+1}}"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--Here are the hiden dialogs-->
    <!-- <div id="dialogSpace">
        <div id="start" title="Consignes">
            <h4>Etape 1 :</h4>
            <h4>Vous devez observer, analyser, et évaluer de façon individuelle les données  collectés.</h4>
             <h4>Choisissez 1 lieu et visualisez les informations sur votre tablette.</h4>
            <br>
             <h4>BONUS :</h4>
             <h4>Gagnez 1 badge Note en prenant au moins 5 notes pertinentes pour le groupe.</h4>
             <h4>Gagnez le badge Timer si vous finissez toutes les évaluation individuelle dans les 8 minutes.</h4>
        </div>
        <div id="insectInfoWrap">
            <!-Ver'Epice-->
            <!-- <div id="insectDialog" class="insects" title="Fourmis">
                <img src="img/fourmis.jpeg">
            </div>
        </div>
        <div id="choiceConfirm" title="Choisir un emplacement"><h4></h4></div>
        <div id="secondStepDialog" title="Consignes">
            <h4>Etape 2 :</h4>
            <h4>Bravo! Vous avez gagné le badge Timer!</h4>
            <!-keep for further functionaility-->
            <!-- <h4 class="winNoteBadge"></h4>
            <br>
            <h4>Visualisez les résultats des évaluations.</h4>
            <h4>Choisissez l'emplacement le plus pertinent pour votre nurserie.</h4>
            <h4>Vous avez 5 minutes pour cette étape.</h4>
        </div>
        <div id="secondStepDialog_noBadge" title="Consignes">
            <h4>Etape 2 :</h4>
            <h4 class="winNoteBadge"></h4>
            <br>
            <h4>Visualisez les résultats des évaluations.</h4>
            <h4>Choisissez l'emplacement le plus pertinent pour votre nurserie.</h4>
            <h4>Vous avez 5 minutes pour cette étape.</h4>
        </div>
        <div id="gameEnd" title="Consignes">
            <h4></h4>
            <h4>En utilisant vos tablettes, justifiez votre choix en quelques lignes dans la case argumentaire.</h4>
            <h4>Pensez à l'énergie, les conditions climatiques, etc.</h4>
            <h4>Vous avez 7 minutes pour cette étape.</h4>
        </div>
        <div id="finalDialog" title="Consignes">
            <h4>Bravo!</h4>
            <h4>Vous venez de finir l'activité!</h4>
        </div> -->
    <!-- </div> -->
    <!-- <div id="map"></div> -->
</div>
<div ng-controller="MapCtrl">
    <leaflet lf-center="center" tiles="tiles" geojson="geojson" markers="markers" width="100%" height="480px"></leaflet>
</div>